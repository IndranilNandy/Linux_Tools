#!/bin/bash

# Insert entry of this tool in .allTools. This is to be used in the verification stage post setup.
grep -q "dkrstepper:" ../../../_verify/.allTools || echo "dkrstepper:dkrstepper" >>../../../_verify/.allTools

#Check if all prerequisites are installed, and install the missing ones
prereq --install ".prereq"

# Exit if still missing any prerequisite
[[ $(prereq --missing ".prereq") ]] && echo -e "${RED}One or more prerequisites are still missing. Exiting.${RESET}" && exit 0

# Check if it is already installed
[[ -n $(which dkrstepper) ]] && echo -e "\n${GREEN}[dkrstepper] Already installed. Exiting.${RESET}" && exit 0

echo -e "${YELLOW}[dkrstepper] Setup process started.${RESET}"

# myscriptref --create dkrstepper.sh "$(pwd)" dkrstepper
yes | sudo ln -i -s $(pwd)/dkrstepper.sh $MYCOMMANDSREPO/dkrstepper && echo -e "\nCreated symbolink link dkrstepper in $MYCOMMANDSREPO"

# mycompl -W \"server client --setup --uninstall --config --refresh --help\" mynfs

echo -e "${GREEN}[dkrstepper] Setup finished.${RESET}"
