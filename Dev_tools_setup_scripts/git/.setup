#!/bin/bash

#Check if all prerequisites are installed, and install the missing ones
prereq --install ".prereq"

# Exit if still missing any prerequisite
[[ $(prereq --missing ".prereq") ]] && echo -e"${RED}One or more prerequisites are still missing. Exiting.${RESET}" && exit 0

# Check if it is already installed
# Intentionally skipping the following check, since the batch installation script should anyway preceed with git installation.
# DO NOT REMOVE THE FOLLOWING LINE PERMANENTLY
[[ -n $(which git) ]] && echo -e "${GREEN}[git] Already installed. Exiting.${RESET}" 
# && exit 0

echo -e "${YELLOW}[git] Setup process started.${RESET}"

./git_installer.sh

symlink=setgittool
yes | sudo ln -i -s $(pwd)/configurer/genericDiffAndMergeToolConfigurer/setgittool $MYCOMMANDSREPO/$symlink && echo -e "\nCreated symbolink link [$symlink] in $MYCOMMANDSREPO"
echo -e "${GREEN}[git] Setup finished.${RESET}"
