#!/bin/bash

#Check if all prerequisites are installed, and install the missing ones
prereq --install ".prereq"

# Exit if still missing any prerequisite
[[ $(prereq --missing ".prereq") ]] && echo "One or more prerequisites are still missing. Exiting." && exit 0

# Check if it is already installed
[[ -n $(which cmount) ]] && echo "[cifsSharedFolderSetup] Already installed. Exiting." && exit 0

echo "[cifsSharedFolderSetup] Setup process started."

./cifs_configurer.sh $*

yes | sudo ln -s -i $(pwd)/cifs_sharing_mount.sh $MYCOMMANDSREPO/cmount
yes | sudo ln -s -i $(pwd)/cifs_sharing_unmount.sh $MYCOMMANDSREPO/cumount
