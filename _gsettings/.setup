#!/bin/bash

# HOw to get the codes for the favApps?
# First, manuall launch the application and do 'Add to favourites'
# Now, check in commandline - gsettings get org.gnome.shell favorite-apps
# See which entry is updated. Add that entry to .favApps

echo -e "${BLUE}${BOLD}Starting GSETTINGS configuration.${RESET}"
cat .gsettings | grep -v "^#" | xargs -I X echo "gsettings set X" | bash

export curFavApps=$(gsettings get org.gnome.shell favorite-apps | sed s/.$//)
# cat .favApps | xargs -I X echo "[[ \$(echo $curFavApps | grep X) ]] || curFavApps=\"\$curFavApps, X\"" | bash

mapfile -t favArray <<< "$(cat .favApps | xargs -I X echo X)"

for val in "${favArray[@]}"; do
    [[ $(echo "$curFavApps" | grep $val) ]] || curFavApps="$curFavApps, '$val'"
done

# HINT: Search .desktop file with -- find "$HOME" -path "$HOME"/thinclient_drives -prune -false -o -name "*.desktop"

gsettings set org.gnome.shell favorite-apps "$curFavApps]"
./set_terminal_preferences.sh
echo -e "${BLUE}${BOLD}Finished GSETTINGS configuration.${RESET}"
