#!/bin/bash

# sed 's/.*:\(.*\)/\1/' .allTools | xargs -I X echo "[[ "\$\(ifinstalled X\)" ]] && echo "X: yes"" | bash
echo -e "${BLUE}${BOLD}Verifying installation${RESET}"
for x in $(cat .allTools); do
    # echo $x
    cmd=$(echo "$x" | sed 's/.*:\(.*\)/\1/')
    tool=$(echo "$x" | sed 's/\(.*\):.*/\1/')

    if [[ $(ifinstalled $cmd) ]]; then
        echo "$tool:installed"
    else
        case $cmd in
        java)
            # TODO: HARDCODED path needs to be changed
            "$HOME"/MyTools/Linux_Tools/Dev_tools_setup_scripts/jdk/.check_installation.sh && -e "$tool:installed" || echo -e "$tool:NOT installed"
            ;;
        gradle)
            which gradle > /dev/null && echo -e "$tool:installed" || echo -e "$tool:NOT installed"
            ;;
        sdk)
            echo "$tool:[check manually] run 'sdk version'"
            # if [[ -n $(sdk version 2>/dev/null) ]]; then
            #     echo "$tool:installed"
            # else
            #     echo "$tool:NOT installed"
            # fi
            ;;
        winmerge)
            if [[ -e $HOME/'.wine/drive_c/Program Files/WinMerge/WinMergeU.exe' ]]; then
                echo "$tool:installed"
            else
                echo "$tool:NOT installed"
            fi
            ;;
        *)
            echo "$tool:NOT installed"
            ;;
        esac
    fi
done

echo -e "${BLUE}${BOLD}Verification completed${RESET}"
