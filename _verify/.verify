#!/bin/bash

# sed 's/.*:\(.*\)/\1/' .allTools | xargs -I X echo "[[ "\$\(ifinstalled X\)" ]] && echo "X: yes"" | bash
echo -e "${BLUE}${BOLD}Verifying installation${RESET}"
for x in $(cat .allTools); do
    # echo $x
    cmd=$(echo "$x" | sed 's/.*:\(.*\)/\1/')
    tool=$(echo "$x" | sed 's/\(.*\):.*/\1/')

    if [[ $(ifinstalled $cmd) ]]; then
        printf "%-50s %s\n" "$tool" ":installed"
    else
        case $cmd in
        java)
            # TODO: HARDCODED path needs to be changed
            "$HOME"/MyTools/Linux_Tools/Dev_tools_setup_scripts/jdk/.check_installation.sh && echo -e "$tool:installed" || echo -e "$tool:NOT installed"
            ;;
        gradle)
            which gradle >/dev/null && printf "%-50s %s\n" "$tool" ":installed" || printf "%-50s %s\n" "$tool" ":NOT installed"
            ;;
        sdk)
            bash --init-file <(echo -e "source ~/.bashrc; sdk version > /dev/null 2>&1 || exit 1; exit 0;") && printf "%-50s %s\n" "$tool" ":installed" || printf "%-50s %s\n" "$tool" ":NOT installed"
            ;;
        winmerge)
            if [[ -e $HOME/'.wine/drive_c/Program Files/WinMerge/WinMergeU.exe' ]]; then
                printf "%-50s %s\n" "$tool" ":installed"
            else
                printf "%-50s %s\n" "$tool" ":NOT installed"
            fi
            ;;
        *)
            printf "%-50s %s\n" "$tool" ":NOT installed"
            ;;
        esac
    fi
done

echo -e "${BLUE}${BOLD}Verification completed${RESET}"
